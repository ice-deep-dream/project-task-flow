/**
 *
 * @author BingChiHan
 * @date 2024/7/23 15:23
 * @version 1.0.0
 **/

import dayjs from 'dayjs';
const object = {
    titleField:'fldpQqfqbe',
    dateField:'fldKzpWj0g',
    statusField:'fldQVS0Qiw',
}

const data = [
    {
        "fields": {
            "fldifpf450": 1.608074,
            "fldlrKW81m": 1721491200000,
            "fldPffsaKY": null,
            "fldKzpWj0g": 1720886400000,
            "fldHsZDzOK": {
                "id": "optsOe8Qsv",
                "text": "未启动"
            },
            "fldQVS0Qiw": {
                "id": "optKbgwhJJ",
                "text": "订单验收品质标准"
            },
            "fldpQqfqbe": [
                {
                    "type": "text",
                    "text": "订单验收品质标准"
                }
            ],
            "fldUwZ1FGE": [
                {
                    "type": "text",
                    "text": "订单验收品质标准"
                }
            ]
        },
        "recordId": "recpe909Rq"
    },
    {
        "fields": {
            "fldifpf450": 1.61,
            "fldlrKW81m": null,
            "fldPffsaKY": {
                "recordIds": [
                    "recq1VkBIH"
                ],
                "tableId": "tblNRzojIWMUjtwb",
                "record_ids": [
                    "recq1VkBIH"
                ],
                "table_id": "tblNRzojIWMUjtwb",
                "text": "包装方案",
                "type": "text"
            },
            "fldKzpWj0g": 1719763200000,
            "fldHsZDzOK": {
                "id": "optZqBPxOn",
                "text": "进行中"
            },
            "fldQVS0Qiw": {
                "id": "optLqZtlgM",
                "text": "包装方案1132"
            },
            "fldpQqfqbe": [
                {
                    "type": "text",
                    "text": "包装方案1132"
                }
            ],
            "fldUwZ1FGE": [
                {
                    "type": "text",
                    "text": "包装方案1132"
                }
            ]
        },
        "recordId": "recuiXOy6AxVzM"
    },
    {
        "fields": {
            "fldifpf450": 1.61,
            "fldlrKW81m": null,
            "fldPffsaKY": {
                "recordIds": [
                    "recq1VkBIH"
                ],
                "tableId": "tblNRzojIWMUjtwb",
                "record_ids": [
                    "recq1VkBIH"
                ],
                "table_id": "tblNRzojIWMUjtwb",
                "text": "包装方案",
                "type": "text"
            },
            "fldKzpWj0g": 1719849600000,
            "fldHsZDzOK": {
                "id": "optZqBPxOn",
                "text": "进行中"
            },
            "fldQVS0Qiw": {
                "id": "optLqZtlgM",
                "text": "包装方案1132"
            },
            "fldpQqfqbe": [
                {
                    "type": "text",
                    "text": "包装方案1232"
                }
            ],
            "fldUwZ1FGE": [
                {
                    "type": "text",
                    "text": "包装方案1132"
                }
            ]
        },
        "recordId": "recuiXOAkx2uy0"
    },
    {
        "fields": {
            "fldifpf450": 14993.805674,
            "fldlrKW81m": 1719763200000,
            "fldPffsaKY": null,
            "fldKzpWj0g": 1719763200000,
            "fldHsZDzOK": {
                "id": "optm2bvLKu",
                "text": "已完成"
            },
            "fldQVS0Qiw": {
                "id": "optpB71SEl",
                "text": "客户合同PO"
            },
            "fldpQqfqbe": [
                {
                    "type": "text",
                    "text": "客户合同PO"
                }
            ],
            "fldUwZ1FGE": [
                {
                    "type": "text",
                    "text": "客户合同PO"
                }
            ]
        },
        "recordId": "recxJGehSB"
    },
    {
        "fields": {
            "fldifpf450": 1.608074,
            "fldlrKW81m": 1719936000000,
            "fldPffsaKY": null,
            "fldKzpWj0g": 1719936000000,
            "fldHsZDzOK": {
                "id": "optZqBPxOn",
                "text": "进行中"
            },
            "fldQVS0Qiw": {
                "id": "optZvrItFR",
                "text": "包装方案"
            },
            "fldpQqfqbe": [
                {
                    "type": "text",
                    "text": "包装方案"
                }
            ],
            "fldUwZ1FGE": [
                {
                    "type": "text",
                    "text": "包装方案"
                }
            ]
        },
        "recordId": "recq1VkBIH"
    },
    {
        "fields": {
            "fldifpf450": 1.608074,
            "fldlrKW81m": 1722096000000,
            "fldPffsaKY": null,
            "fldKzpWj0g": 1720108800000,
            "fldHsZDzOK": {
                "id": "optZqBPxOn",
                "text": "进行中"
            },
            "fldQVS0Qiw": {
                "id": "opt0IDufhx",
                "text": "包装设计文件"
            },
            "fldpQqfqbe": [
                {
                    "type": "text",
                    "text": "包装设计文件"
                }
            ],
            "fldUwZ1FGE": [
                {
                    "type": "text",
                    "text": "包装设计文件"
                }
            ]
        },
        "recordId": "recOUQnkJM"
    },
    {
        "fields": {
            "fldifpf450": 162.415474,
            "fldlrKW81m": 1722355200000,
            "fldPffsaKY": null,
            "fldKzpWj0g": 1720800000000,
            "fldHsZDzOK": {
                "id": "optsOe8Qsv",
                "text": "未启动"
            },
            "fldQVS0Qiw": {
                "id": "optF1tnQZX",
                "text": "客户文件"
            },
            "fldpQqfqbe": [
                {
                    "type": "text",
                    "text": "客户文件"
                }
            ],
            "fldUwZ1FGE": [
                {
                    "type": "text",
                    "text": "客户文件"
                }
            ]
        },
        "recordId": "rec4j484wR"
    }
]


export interface FlowNodeData {
    /**
     * 流程的唯一标识符
     */
    id: number;

    /**
     * 流程的状态
     */
    status: number;

    /**
     * 流程的标题
     */
    title: string;

    /**
     * 流程节点的持续天数
     */
    dayDuration: string;

    /**
     * 相关记录的 ID
     */
    recordID: string;

    /**
     * 流程节点的描述
     */
    description:  string;

    /**
     * 子节点对象
     */
    childNode:  object;
}


function processData(data: any[], object: { [key: string]: string }): FlowNodeData[] {
    return data.map((item) => {
        const { fields, recordId } = item;
        const dateValue = fields[object.dateField];
        const formattedDate = dayjs(dateValue).format('MM/DD');

        return {
            id: 0,
            status: 0,
            title: fields[object.titleField][0].text,
            dayDuration: formattedDate,
            recordID: recordId,
            description: '',
            childNode: {}
        };
    });
}

console.log({processData})
